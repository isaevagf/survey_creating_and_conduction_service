{% extends "base.html" %}

{% block title %}–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–Ω–∫–µ—Ç–µ{% endblock %}

{% block content %}
<div class="container mt-4">
    <h2 class="text-primary mb-3">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –∞–Ω–∫–µ—Ç–µ "{{ questionnaire.name }}"</h2>

    <div class="row mb-4">
        <div class="col-md-6">
            <div class="card shadow-sm text-center">
                <div class="card-body">
                    <h5 class="card-title">–í—Å–µ–≥–æ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–π</h5>
                    <p class="display-6">{{ total_responses }}</p>
                </div>
            </div>
        </div>

        <div class="col-md-6">
            <div class="card shadow-sm text-center">
                <div class="card-body">
                    <h5 class="card-title">–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h5>
                    <p class="display-6">{{ unique_users }}</p>
                </div>
            </div>
        </div>
    </div>

    <hr>
    <h4 class="mt-4">üìã –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º</h4>

    {% for q in questions_stats %}
        <div class="card mb-3 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">{{ q.question }}</h5>
                {% if q.choices %}
                <ul class="list-group list-group-flush">
                    {% for choice in q.choices %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            <span>{{ choice.text }}</span>
                            <span class="badge bg-primary rounded-pill">
                                {{ choice.count }} —Ä–∞–∑ ‚Ä¢ {{ choice.points }} –±–∞–ª–ª–æ–≤ ‚Ä¢ {{ choice.percent }}%
                            </span>
                        </li>
                    {% endfor %}
                </ul>
            {% elif q.text_answers %}
                <ul class="list-group list-group-flush">
                    {% for answer in q.text_answers %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                         <span>{{ answer.text }}</span>
                            <span class="badge bg-primary rounded-pill">
                            {{ answer.count }} —Ä–∞–∑
                            </span>
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-muted">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ —ç—Ç–æ–º—É –≤–æ–ø—Ä–æ—Å—É.</p>
            {% endif %}
            </div>
        </div>
    {% empty %}
        <div class="alert alert-warning">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤–æ–ø—Ä–æ—Å–∞–º.</div>
    {% endfor %}

    <a href="{% url 'authorization:dashboard' %}" class="btn btn-secondary mt-3">‚¨Ö –ù–∞–∑–∞–¥</a>
</div>
{% endblock %}

